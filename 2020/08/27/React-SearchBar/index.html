<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Hoang Gia Hung"><title>React SearchBar · XOXO :)))</title><meta name="description" content="React Component Search Bar
Hôm nay mình sẽ làm một component search bar như hình trên, sử dụng react hook (React hook là một tính năng mới được thêm v"><meta name="keywords" content="javascript"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta property="og:image" content="https://lh6.googleusercontent.com/VfhqMbxmSa9xzYQ1PyPYZT_um7Utqw0WPbA_3tMgSvaHirhJ0kAQwhGvOoENnYxaSa4vspC1rRk0BaxgMsq46HWQ86fcwtbQGYasNsnT=s484"><meta name="renderer" content="webkit"><link href="https://fonts.googleapis.com/css2?family=Itim&amp;display=swap" rel="stylesheet"><link rel="icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.css"><script src="/js/jquery.js"></script><script src="https://unpkg.com/@barba/core"></script><meta name="generator" content="Hexo 4.2.1"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/aa.jpg" style="width:127px;border-radius:50%;margin-bottom: 12px;border: 4px solid #272343;"><h3 author=""><a href="/">Hung</a></h3><div class="description"><p>Web Developer <br> Sharing is my pleasure.</p></div></div></div><ul class="social-links"><li><a href="https://gitlab.com/giahungbk" target="_blank" rel="noopener"><i class="fa fa-github"></i></a></li><li><a href="https://fb.com/silver.moon255" target="_blank" rel="noopener"><i class="fa fa-facebook-official"></i></a></li></ul><div class="footer"><div class="p"><span>© 2020</span><i class="fa fa-star"></i><span> Hoang Hung</span></div></div></div><div class="main"><div class="page-top animated fadeInDown" data-barba="wrapper"><div class="nav"><li><a href="/">Home</a></li><li><a href="/archives">Archives</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"></a></li></div></div></div><div class="autopagerize_page_element"><div class="content" data-barba="container"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>React SearchBar</a></h3></div><div class="post-content"><h1 id="React-Component-Search-Bar"><a href="#React-Component-Search-Bar" class="headerlink" title="React Component Search Bar"></a>React Component Search Bar</h1><p><img src="/images/pasted-0.png" alt="upload successful"></p>
<p>Hôm nay mình sẽ làm một component search bar như hình trên, sử dụng react hook (React hook là một tính năng mới được thêm vào từ bản react 16.8 mục đích là để sử dụng được state và lifecycle trong function component)</p>
<h2 id="Duoi-day-la-phan-code"><a href="#Duoi-day-la-phan-code" class="headerlink" title="Dưới đây là phần code"></a>Dưới đây là phần code</h2><ul>
<li>CSS</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">form</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#37474f</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10rem</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">300ms</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.645</span>, <span class="number">0.045</span>, <span class="number">0.355</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: transparent;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">300ms</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.645</span>, <span class="number">0.045</span>, <span class="number">0.355</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:focus</span>,</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">::placeholder</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: transparent;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Component</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SearchBar = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [input, setInput] = useState(<span class="string">""</span>); <span class="comment">// state input để lưu value của thẻ input</span></span><br><span class="line">  <span class="keyword">const</span> [barOpened, setBarOpened] = useState(<span class="literal">false</span>); <span class="comment">// barOpened để check khi click</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> formRef = useRef(); <span class="comment">// formRef để tham chiếu đến element form</span></span><br><span class="line">  <span class="keyword">const</span> inputFocus = useRef(); <span class="comment">// inputFocus để tham chiếu đến element input</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// useEffect không truyền đối số nào thì hoạt động như componentDidMount trong class component</span></span><br><span class="line"><span class="comment">// thêm sự kiện mousedown cho document khi mounted và remove sự kiện khi component unmount</span></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">"mousedown"</span>, handleClick);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">document</span>.removeEventListener(<span class="string">"mousedown"</span>, handleClick);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="comment">// hàm này xử lý khi click ra ngoài form</span></span><br><span class="line">  <span class="keyword">const</span> handleClick = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (formRef.current.contains(e.target)) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    setBarOpened(<span class="literal">false</span>);</span><br><span class="line">    setInput(<span class="string">""</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// hàm này xử lý khi form submit</span></span><br><span class="line">  <span class="keyword">const</span> onFormSubmit = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="keyword">if</span> (!input) <span class="keyword">return</span>;</span><br><span class="line">    setInput(<span class="string">""</span>);</span><br><span class="line">    setBarOpened(<span class="literal">false</span>);</span><br><span class="line">    props.onClick(input);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;form</span><br><span class="line">        onClick=&#123;() =&gt; &#123;</span><br><span class="line">          setBarOpened(<span class="literal">true</span>);</span><br><span class="line">          inputFocus.current.focus();</span><br><span class="line">        &#125;&#125;</span><br><span class="line">        onSubmit=&#123;onFormSubmit&#125;</span><br><span class="line">        ref=&#123;formRef&#125;</span><br><span class="line">        style=&#123;&#123;</span><br><span class="line">          width: barOpened ? <span class="string">"30rem"</span> : <span class="string">"2rem"</span>,</span><br><span class="line">          cursor: barOpened ? <span class="string">"auto"</span> : <span class="string">"pointer"</span></span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          type=<span class="string">"submit"</span></span><br><span class="line">          style=&#123;&#123;</span><br><span class="line">            pointerEvents: barOpened ? <span class="string">"auto"</span> : <span class="string">"none"</span>,</span><br><span class="line">            cursor: barOpened ? <span class="string">"pointer"</span> : <span class="string">"none"</span></span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          icon</span><br><span class="line">        &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;input</span></span><br><span class="line"><span class="regexp">          onChange=&#123;(e) =&gt; setInput(e.target.value)&#125;</span></span><br><span class="line"><span class="regexp">          ref=&#123;inputFocus&#125;</span></span><br><span class="line"><span class="regexp">          value=&#123;input&#125;</span></span><br><span class="line"><span class="regexp">          placeholder="Search..."</span></span><br><span class="line"><span class="regexp">          style=&#123;&#123;</span></span><br><span class="line"><span class="regexp">            marginLeft: barOpened ? "1rem" : "0rem"</span></span><br><span class="line"><span class="regexp">          &#125;&#125;</span></span><br><span class="line"><span class="regexp">        /</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>Cách sử dụng:</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// props là 1 function để lấy data khi form submit</span></span><br><span class="line">&lt;SearchBar onClick=&#123;(data) =&gt; <span class="built_in">console</span>.log(data)&#125; /&gt;</span><br></pre></td></tr></table></figure>

<p><a href="https://codesandbox.io/s/js-search-bar-r7id5" target="_blank" rel="noopener">Link demo</a></p>
<p><a href="https://codesandbox.io/s/ts-search-bar-zt349" target="_blank" rel="noopener">Link demo dùng TS</a></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2020-08-27</span><i class="fa fa-tag"></i><a class="tag" href="/categories/Reactjs/" title="Reactjs">Reactjs </a><a class="tag" href="/tags/css/" title="css">css </a><a class="tag" href="/tags/reactjs/" title="reactjs">reactjs </a><a class="tag" href="/tags/js/" title="js">js </a><a class="tag" href="/tags/ts/" title="ts">ts </a></div></div></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2020/08/28/React-TagInput/" title="React TagInput">Prev Post</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2020/08/04/Debounce-va-Throttle/" title="Debounce và Throttle">Next Post</a></li></ul></div><div id="vcomments" style="margin:0 30px;"></div><script src="//cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.js"></script><script src="//cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><script>var gitalk = new Gitalk({
  clientID: 'cfd0c13e646f89a5822d',
  clientSecret: '19949c2b11758a4422e5b995d34ed1865e37df3e',
  repo: 'hunghg255.github.io',
  owner: 'hunghg255',
  admin: ['hunghg255'],
  id: md5(location.pathname),
  distractionFreeMode: true
})
gitalk.render('vcomments')</script></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/main.js"></script></body></html>